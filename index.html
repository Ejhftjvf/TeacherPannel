<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Panel (Demo)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 250px;
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .sidebar .pfp-container {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            overflow: hidden;
            margin-bottom: 20px;
            background-color: #34495e;
        }

        .sidebar .pfp-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .sidebar h2 {
            margin-bottom: 20px;
            text-align: center;
        }

        .sidebar ul {
            list-style: none;
            width: 100%;
        }

        .sidebar li {
            padding: 15px;
            cursor: pointer;
            transition: background-color 0.3s;
            text-align: center;
        }

        .sidebar li:hover {
            background-color: #34495e;
        }

        .content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .section {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .section.active {
            display: block;
        }

        h2 {
            margin-bottom: 20px;
            color: #2c3e50;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 400px;
            margin-bottom: 20px;
        }

        input, textarea, select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            padding: 10px;
            background-color: #2c3e50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #34495e;
        }

        .grid-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .list-item {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .list-item h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .list-item p {
            margin: 5px 0;
            color: #666;
        }

        .list-item a {
            color: #2c3e50;
            text-decoration: none;
        }

        .list-item a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="sidebar">
            <div class="pfp-container" id="pfpContainer">
                <img id="pfpImage" src="" alt="Profile Picture" style="display: none;">
            </div>
            <h2>Teacher Panel</h2>
            <ul>
                <li onclick="showSection('profile')">Profile</li>
                <li onclick="showSection('students')">Students</li>
                <li onclick="showSection('assignments')">Assignments</li>
                <li onclick="showSection('sessional')">Sessional</li>
                <li onclick="logout()">Logout</li>
            </ul>
        </nav>

        <main class="content">
            <!-- Profile Section -->
            <section id="profile" class="section active">
                <h2>Profile</h2>
                <div id="profileInfo" class="grid-list"></div>
                <form id="profileForm">
                    <input type="text" id="teacherName" placeholder="Name" required>
                    <input type="email" id="teacherEmail" placeholder="Email" required>
                    <input type="file" id="profilePic" accept="image/*">
                    <button type="submit">Update Profile</button>
                </form>
            </section>

            <!-- Students Section -->
            <section id="students" class="section">
                <h2>Students List</h2>
                <div id="studentsList" class="grid-list"></div>
            </section>

            <!-- Assignments Section -->
            <section id="assignments" class="section">
                <h2>Assignments</h2>
                <form id="assignmentForm">
                    <input type="text" id="assignmentTitle" placeholder="Assignment Title" required>
                    <textarea id="assignmentDesc" placeholder="Description" required></textarea>
                    <input type="date" id="dueDate" required>
                    <input type="file" id="assignmentPdf" accept=".pdf">
                    <button type="submit">Create Assignment</button>
                </form>
                <div id="assignmentsList" class="grid-list"></div>
            </section>

            <!-- Sessional Section -->
            <section id="sessional" class="section">
                <h2>Sessional Marks</h2>
                <form id="sessionalForm">
                    <select id="studentSelect" required></select>
                    <input type="number" id="sessionalMarks" placeholder="Marks (0-100)" min="0" max="100" required>
                    <button type="submit">Submit Marks</button>
                </form>
                <div id="sessionalList" class="grid-list"></div>
            </section>
        </main>
    </div>

    <script>
        // Demo data initialization
        const demoStudents = [
            { id: "stu1", name: "John Doe", email: "john@example.com" },
            { id: "stu2", name: "Jane Smith", email: "jane@example.com" },
            { id: "stu3", name: "Bob Johnson", email: "bob@example.com" }
        ];

        // Initialize localStorage with demo data if not already present
        if (!localStorage.getItem('students')) {
            localStorage.setItem('students', JSON.stringify(demoStudents));
        }
        if (!localStorage.getItem('assignments')) {
            localStorage.setItem('assignments', JSON.stringify([]));
        }
        if (!localStorage.getItem('sessional')) {
            localStorage.setItem('sessional', JSON.stringify([]));
        }
        if (!localStorage.getItem('teacher')) {
            localStorage.setItem('teacher', JSON.stringify({ name: "Demo Teacher", email: "teacher@example.com", pfp: null }));
        }

        // Show/hide sections
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
        }

        // Logout (simulated)
        function logout() {
            alert('Logged out (simulated)');
        }

        // Update PFP display
        function updatePfpDisplay() {
            const teacher = JSON.parse(localStorage.getItem('teacher'));
            const pfpImage = document.getElementById('pfpImage');
            if (teacher.pfp) {
                pfpImage.src = teacher.pfp;
                pfpImage.style.display = 'block';
            } else {
                pfpImage.style.display = 'none';
            }
        }

        // Profile Management with PFP
        document.getElementById('profileForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('teacherName').value;
            const email = document.getElementById('teacherEmail').value;
            const pfpFile = document.getElementById('profilePic').files[0];
            
            const teacherData = JSON.parse(localStorage.getItem('teacher')) || { name: "Demo Teacher", email: "teacher@example.com", pfp: null };

            if (pfpFile) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    teacherData.name = name;
                    teacherData.email = email;
                    teacherData.pfp = event.target.result; // Store image as base64
                    localStorage.setItem('teacher', JSON.stringify(teacherData));
                    loadProfile();
                    updatePfpDisplay();
                    alert('Profile updated successfully');
                };
                reader.readAsDataURL(pfpFile);
            } else {
                teacherData.name = name;
                teacherData.email = email;
                localStorage.setItem('teacher', JSON.stringify(teacherData));
                loadProfile();
                updatePfpDisplay();
                alert('Profile updated successfully');
            }
        });

        function loadProfile() {
            const teacher = JSON.parse(localStorage.getItem('teacher'));
            document.getElementById('profileInfo').innerHTML = `
                <div class="list-item">
                    <h4>Teacher Profile</h4>
                    <p>Name: ${teacher.name}</p>
                    <p>Email: ${teacher.email}</p>
                    ${teacher.pfp ? '<p>Profile Picture: Uploaded</p>' : '<p>No Profile Picture</p>'}
                </div>
            `;
        }

        // Students Management
        function loadStudents() {
            const students = JSON.parse(localStorage.getItem('students'));
            let html = '';
            const studentSelect = document.getElementById('studentSelect');
            studentSelect.innerHTML = '<option value="">Select Student</option>';
            
            students.forEach(student => {
                html += `
                    <div class="list-item">
                        <h4>${student.name}</h4>
                        <p>Email: ${student.email}</p>
                        <p>ID: ${student.id}</p>
                    </div>
                `;
                studentSelect.innerHTML += `<option value="${student.id}">${student.name}</option>`;
            });
            document.getElementById('studentsList').innerHTML = html;
        }

        // Assignments Management with PDF Upload
        document.getElementById('assignmentForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const title = document.getElementById('assignmentTitle').value;
            const desc = document.getElementById('assignmentDesc').value;
            const dueDate = document.getElementById('dueDate').value;
            const pdfFile = document.getElementById('assignmentPdf').files[0];

            const assignments = JSON.parse(localStorage.getItem('assignments'));
            const newAssignment = {
                id: Date.now().toString(),
                title,
                description: desc,
                dueDate,
                createdAt: new Date().toISOString(),
                pdfUrl: null,
                pdfName: null
            };

            if (pdfFile) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    newAssignment.pdfUrl = event.target.result;
                    newAssignment.pdfName = pdfFile.name;
                    assignments.push(newAssignment);
                    localStorage.setItem('assignments', JSON.stringify(assignments));
                    loadAssignments();
                    e.target.reset();
                    alert('Assignment created successfully');
                };
                reader.readAsDataURL(pdfFile);
            } else {
                assignments.push(newAssignment);
                localStorage.setItem('assignments', JSON.stringify(assignments));
                loadAssignments();
                e.target.reset();
                alert('Assignment created successfully');
            }
        });

        function loadAssignments() {
            const assignments = JSON.parse(localStorage.getItem('assignments'));
            let html = '';
            assignments.forEach(assignment => {
                html += `
                    <div class="list-item">
                        <h4>${assignment.title}</h4>
                        <p>${assignment.description}</p>
                        <p>Due: ${assignment.dueDate}</p>
                        ${assignment.pdfUrl ? `<p><a href="${assignment.pdfUrl}" download="${assignment.pdfName}">Download PDF: ${assignment.pdfName}</a></p>` : ''}
                    </div>
                `;
            });
            document.getElementById('assignmentsList').innerHTML = html;
        }

        // Sessional Management
        document.getElementById('sessionalForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const studentId = document.getElementById('studentSelect').value;
            const marks = document.getElementById('sessionalMarks').value;

            const sessional = JSON.parse(localStorage.getItem('sessional'));
            const newSessional = {
                id: Date.now().toString(),
                studentId,
                marks: parseInt(marks),
                createdAt: new Date().toISOString()
            };
            sessional.push(newSessional);
            localStorage.setItem('sessional', JSON.stringify(sessional));
            
            loadSessional();
            e.target.reset();
            alert('Marks submitted successfully');
        });

        function loadSessional() {
            const sessional = JSON.parse(localStorage.getItem('sessional'));
            const students = JSON.parse(localStorage.getItem('students'));
            let html = '';
            
            sessional.forEach(record => {
                const student = students.find(s => s.id === record.studentId);
                if (student) {
                    html += `
                        <div class="list-item">
                            <h4>${student.name}</h4>
                            <p>Marks: ${record.marks}</p>
                            <p>Date: ${new Date(record.createdAt).toLocaleDateString()}</p>
                        </div>
                    `;
                }
            });
            document.getElementById('sessionalList').innerHTML = html;
        }

        // Initial load
        document.addEventListener('DOMContentLoaded', () => {
            loadProfile();
            loadStudents();
            loadAssignments();
            loadSessional();
            updatePfpDisplay();
        });
    </script>
</body>
</html>